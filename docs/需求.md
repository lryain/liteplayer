# 需求

Liteplayer 是一个为嵌入式平台设计的低开销低延时的音频播放器，支持 Android、iOS、Linux、RTOS 等平台

Liteplayer 具有如下特点：

1. 支持 MP3、AAC、M4A、WAV、格式，支持本地文件、本地播放列表、HTTP/HTTPS/HLS 和 TTS 数据流，接口和状态机与 Android MediaPlayer 一致
2. 极低的系统开销，1-2 个线程（建议网络流使用双线程模式，文件流使用单线程模式），最低至 48KB 堆内存占用，已集成在 主频192MHz + 内存448KB 的系统上并产品量产；高配置平台上可配置更大的缓冲区以取得更好的播放体验
3. 高度的移植性，纯 C 语言 C99 标准，已运行在 Linux、Android、iOS、MacOS、FreeRTOS、AliOS-Things 上；如果其平台不支持 POSIX 接口规范，则实现 Thread、Memory、Time 相关的少量 OSAL 接口也可接入
4. 抽象流数据输入、音频设备输出的接口，使用者可自由添加各种流协议如 rtsp、rtmp、sdcardfs、flash 等等
5. 适配多个解码器，包括 pv-mp3、pv-aac、wave 等等，也可适配芯片原厂提供的解码器

评估3rd/liteplayer模块，设计一个媒体播放引擎，可以扫描指定的文件夹然后自动建立播放清单，并在添加新文件时动态更新播放清单。播放引擎需要支持基本的播放控制功能，如播放、暂停、停止、下一首、上一首等操作。同时，播放引擎应能够处理播放列表中的循环和随机播放模式。
然后加强自定义播放功能：

- 指定音乐名称和歌手以及专辑名称进行播放
- 为歌曲添加标签（如流派、心情、场景等），并支持根据标签进行筛选和播放
- 支持根据用户的历史播放记录和喜好进行个性化推荐
- 支持定时播放功能，可以在指定的时间自动开始或停止播放音乐
- 支持多种音频格式的无缝切换播放
- 支持音频均衡器设置，允许用户根据个人喜好调整音频输出效果
- 支持歌词显示功能，可以同步显示正在播放歌曲的歌词

提供一个配置文件来允许用户自定义播放引擎的行为和功能，比如指定扫描的文件夹路径、设置默认的播放模式（循环、随机等）、配置个性化推荐算法的参数等。

然后提供一个基于zmq的控制接口，让其它模块可以通过zmq总线来控制liteplayer的播放功能。设计好接口规范和数据格式等信息，确保整个系统的设计合理且易于维护。

## 建议的步骤
1. 先充分评估和了解3rd/liteplayer模块的现有功能和架构设计，确定其是否满足上述需求。然后测试现有的例子3rd/liteplayer/example/unix/playlist_demo.c来评估现有模块是否满足需求，并给出详细的评估和分析文档到3rd/liteplayer/docs。
2. 根据需求设计播放引擎的架构和接口规范，确保其能够满足基本的播放控制功能和自定义播放功能。编写设计文档并放到3rd/liteplayer/docs目录下。
3. 实现播放引擎的核心功能，包括扫描文件夹建立播放清单、播放控制功能和自定义播放功能。确保代码结构清晰，易于维护和扩展。
4. 实现基于zmq的控制接口，确保其他模块能够通过zmq总线来控制liteplayer的播放功能以及配置文件中的各项参数的设置。编写接口规范和数据格式文档并放到3rd/liteplayer/docs目录下。
5. 编写测试脚本来验证播放引擎的各项功能，确保其稳定性和可靠性。将测试脚本放到3rd/liteplayer/scripts目录下。
6. 最后编写用户手册和开发文档，帮助其他开发者理解和使用播放引擎。将文档放到3rd/liteplayer/docs目录下。
7. 测试没有问题把3rd/liteplayer模块进行服务化部署到系统中，确保其能够在实际环境中稳定运行。









1. 最后请为3rd/liteplayer 进行服务化部署
2. 然后libs/serial 也需要编写服务文件 到libs/serial/scripts目录下，参考/etc/systemd/system/doly-serial.service
